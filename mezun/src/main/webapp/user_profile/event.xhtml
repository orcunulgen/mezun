<ui:composition template="/templates/user/user_profile_template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<ui:define name="bread_crumb_container">


		<p:breadCrumb>
			<p:menuitem label="Anasayfa" url="/user_profile/index.xhtml" />
			<p:menuitem value="Hesap Ayarları"
				url="profile_settings.xhtml?user=#{profileSettingsView.loggedUser.tcno}" />
			<p:menuitem value="Etkinlikler"
				url="event.xhtml?user=#{profileSettingsView.loggedUser.tcno}" />
		</p:breadCrumb>

	</ui:define>
	<ui:define name="main_container">
		<h:outputStylesheet library="css" name="user_profile/event.css" />
		<div class="event">

			<h:form id="list_event_form">
				<p:growl id="list_event_messages" />
				<p:fieldset legend="Etkinlik Listesi">
					<p:dataTable var="eventList" value="#{eventView.events}"
						paginator="true" rows="10">
						<p:column style="width:15%">
							<f:facet name="header">
								<h:outputLabel value="İşlemler" />
							</f:facet>
							<p:commandButton id="selectButton"
								actionListener="#{eventView.initSelectedEvent(eventList)}"
								update=":event_dialog_form"
								oncomplete="eventUpdateDialog.show()" icon="ui-icon-search"
								title="View">
							</p:commandButton>
							<p:commandButton id="deleteButton"
								actionListener="#{eventView.deleteSelectedEvent(eventList)}"
								icon="ui-icon-close" title="Delete">
							</p:commandButton>
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputLabel value="Etkinlik İsmi" />
							</f:facet>
							<h:outputLabel value="#{eventList.title}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputLabel value="Başlangıç Tarihi" />
							</f:facet>
							<h:outputLabel value="#{eventList.startDate}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputLabel>
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputLabel value="Bitiş Tarihi" />
							</f:facet>
							<h:outputLabel value="#{eventList.endDate}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputLabel>
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputLabel value="Etkinliğin Eklendiği Tarih" />
							</f:facet>
							<h:outputLabel value="#{eventList.registeredDate}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputLabel>
						</p:column>

					</p:dataTable>
				</p:fieldset>
			</h:form>

			<p:dialog header="Etkinliğin Ayrıntıları"
				widgetVar="eventUpdateDialog" resizable="false" id="eventUpdateDlg"
				showEffect="fade" modal="true">
				<h:form id="event_dialog_form">
					<p:growl id="selected_event_dialog_messages" />
					<p:panelGrid styleClass="no_border" id="event_detail_display"
						columns="2" cellpadding="4" style="margin:0 auto;">

						<h:outputLabel value="Etkinlik İsmi :" />
						<p:inputText value="#{eventView.selectedEvent.title}"
							required="true" requiredMessage="Lütfen etkinlik ismi giriniz." />

						<h:outputLabel value="Açıklama :" />
						<p:inputTextarea value="#{eventView.selectedEvent.description}"
							rows="5" cols="50" maxlength="100" autoResize="false"
							required="true"
							requiredMessage="Lütfen etkinliğin detaylarını açıklayınız." />

						<h:outputLabel value="Başlangıç Tarihi :" />
						<p:calendar value="#{eventView.selectedEvent.startDate}"
							showOn="button" />

						<h:outputLabel value="Bitiş Tarihi :" />
						<p:calendar value="#{eventView.selectedEvent.endDate}"
							showOn="button" />

					</p:panelGrid>
					<p:commandButton action="#{eventView.updateEvent}" value="Kaydet"
						ajax="true" icon="ui-icon-disk" update=":event_dialog_form" />
				</h:form>
			</p:dialog>




			<p:commandButton value="Yeni Etkinlik Ekle" type="button"
				onclick="eventAddDialog.show()" icon="ui-icon-plus" />
			<p:dialog header="Etkinlik Ekle" widgetVar="eventAddDialog"
				resizable="false" id="eventAddDlg" showEffect="fade" modal="true">
				<h:form id="dialog_event_add_form">
					<p:growl id="event_add_messages" />
					<p:panelGrid styleClass="no_border" id="event_add_display"
						columns="2" cellpadding="4" style="margin:0 auto;">

						<h:outputLabel value="Etkinlik İsmi :" />
						<p:inputText value="#{eventView.event.title}" required="true"
							requiredMessage="Lütfen etkinlik ismi giriniz." />

						<h:outputLabel value="Açıklama :" />
						<p:inputTextarea id="form_add_description"
							value="#{eventView.event.description}" rows="5" cols="50"
							maxlength="100" autoResize="false" required="true"
							requiredMessage="Lütfen etkinlik detaylarını açıklayınız." />

						<h:outputLabel value="Başlangıç Tarihi :" />
						<p:calendar value="#{eventView.event.startDate}" showOn="button" />

						<h:outputLabel value="Bitiş Tarihi :" />
						<p:calendar value="#{eventView.event.endDate}" showOn="button" />

					</p:panelGrid>
					<p:commandButton action="#{eventView.addEvent}" value="Ekle"
						ajax="true" icon="ui-icon-disk" update=":dialog_event_add_form" />
				</h:form>
			</p:dialog>
		</div>

	</ui:define>
</ui:composition>