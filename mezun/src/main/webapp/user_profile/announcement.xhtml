<ui:composition template="/templates/user/user_profile_template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<ui:define name="main_container">
		<h:outputStylesheet library="css" name="user_profile/announcement.css" />
		<div class="announcement">

			<h:form id="list_announcement_form">
				<p:growl id="list_announcement_messages" />
				<p:fieldset legend="Duyuru Listesi">
					<p:dataTable var="announcementList"
						value="#{announcementView.announcements}" paginator="true"
						rows="10">
						<p:column style="width:15%">
							<f:facet name="header">
								<h:outputLabel value="İşlemler" />
							</f:facet>
							<p:commandButton id="selectButton"
								actionListener="#{announcementView.initSelectedAnnouncement(announcementList)}"
								update=":announcement_dialog_form"
								oncomplete="announcementUpdateDialog.show()"
								icon="ui-icon-search" title="View">
							</p:commandButton>
							<p:commandButton id="deleteButton"
								actionListener="#{announcementView.deleteSelectedAnnouncement(announcementList)}"
								icon="ui-icon-close" title="Delete">
							</p:commandButton>
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputLabel value="Duyuru Başlığı" />
							</f:facet>
							<h:outputLabel value="#{announcementList.title}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputLabel value="Açıklama" />
							</f:facet>
							<h:outputLabel value="#{announcementList.description}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputLabel value="Duyuru Tipi" />
							</f:facet>
							<h:outputLabel
								value="#{announcementList.announcementType.announcementType}" />
						</p:column>


					</p:dataTable>
				</p:fieldset>
			</h:form>

			<p:dialog header="Duyuru Ayrıntıları"
				widgetVar="announcementUpdateDialog" resizable="false"
				id="announcementUpdateDlg" showEffect="fade" modal="true">
				<h:form id="announcement_dialog_form">
					<p:growl id="selected_announcement_dialog_messages" />
					<p:panelGrid styleClass="no_border"
						id="announcement_detail_display" columns="2" cellpadding="4"
						style="margin:0 auto;">

						<h:outputLabel value="Duyuru Başlığı :" />
						<p:inputText
							value="#{announcementView.selectedAnnouncement.title}"
							required="true" requiredMessage="Lütfen duyuru başlığı giriniz." />

						<h:outputLabel value="Açıklama :" />
						<p:inputTextarea
							value="#{announcementView.selectedAnnouncement.description}"
							rows="5" cols="50" maxlength="100" autoResize="false"
							required="true"
							requiredMessage="Lütfen duyuru detaylarını açıklayınız." />

						<h:outputLabel value="Duyuru Tipi :" />
						<p:selectOneMenu validator="announcementTypeValidator"
							converter="announcementTypeConverter"
							value="#{announcementView.selectedAnnouncement.announcementType}">
							<f:selectItem itemValue="0"
								itemLabel="Lütfen duyuru tipini seçiniz" />
							<f:selectItems value="#{announcementView.announcementTypes}"
								var="announcementType" itemValue="#{announcementType}"
								itemLabel="#{announcementType.announcementType}" />
						</p:selectOneMenu>

					</p:panelGrid>
					<p:commandButton action="#{announcementView.updateAnnouncement}"
						value="Kaydet" ajax="true" icon="ui-icon-disk"
						update=":announcement_dialog_form" />
				</h:form>
			</p:dialog>




			<p:commandButton value="Yeni Duyuru Ekle" type="button"
				onclick="announcementAddDialog.show()" icon="ui-icon-plus" />
			<p:dialog header="Duyuru Ekle" widgetVar="announcementAddDialog"
				resizable="false" id="announcementAddDlg" showEffect="fade"
				modal="true">
				<h:form id="dialog_announcement_add_form">
					<p:growl id="announcement_add_messages" />
					<p:panelGrid styleClass="no_border" id="announcement_add_display"
						columns="2" cellpadding="4" style="margin:0 auto;">

						<h:outputLabel value="Duyuru Başlığı :" />
						<p:inputText value="#{announcementView.announcement.title}"
							required="true" requiredMessage="Lütfen duyuru başlığı giriniz." />

						<h:outputLabel value="Açıklama :" />
						<p:inputTextarea id="form_add_description"
							value="#{announcementView.announcement.description}" rows="5"
							cols="50" maxlength="100" autoResize="false" required="true"
							requiredMessage="Lütfen duyuru detaylarını açıklayınız." />

						<h:outputLabel value="Duyuru Tipi :" />
						<p:selectOneMenu validator="announcementTypeValidator"
							converter="announcementTypeConverter"
							id="form_add_announcement_announcement_type"
							value="#{announcementView.announcement.announcementType}">
							<f:selectItem itemValue="0"
								itemLabel="Lütfen duyuru tipi seçiniz" />
							<f:selectItems value="#{announcementView.announcementTypes}"
								var="announcementType" itemValue="#{announcementType}"
								itemLabel="#{announcementType.announcementType}" />
						</p:selectOneMenu>

					</p:panelGrid>
					<p:commandButton action="#{announcementView.addAnnouncement}"
						value="Ekle" ajax="true" icon="ui-icon-disk"
						update=":dialog_announcement_add_form" />
				</h:form>
			</p:dialog>
		</div>

	</ui:define>
</ui:composition>