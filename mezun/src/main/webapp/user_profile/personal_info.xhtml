<ui:composition template="/templates/user/user_profile_template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- <f:metadata>
		<f:event type="preRenderView" listener="#{personalInfoView.checkURL}" />
	</f:metadata> -->

	<ui:define name="main_container">
		<h:outputStylesheet library="css" name="personal_info.css" />
		<div class="personal_info">
			<h:form id="form_personal_info_panel" enctype="multipart/form-data"
				prependId="false">

				<p:growl id="form_personal_info_messages" showDetail="true" />
				<p:fieldset legend="Üyelik Bilgileri">
					<p:panelGrid>

						<p:row>
							<p:column>
								<h:outputLabel for="form_name" value="İsim" />
							</p:column>
							<p:column>
								<p:inputText id="form_name"
									value="#{personalInfoView.loggedUser.name}" required="true"
									requiredMessage="Lütfen isminizi giriniz.">
								</p:inputText>
							</p:column>

							<p:column>
								<h:outputLabel for="form_surname" value="Soyisim" />
							</p:column>
							<p:column>
								<p:inputText id="form_surname"
									value="#{personalInfoView.loggedUser.surname}" required="true"
									requiredMessage="Lütfen soyisminizi giriniz.">
								</p:inputText>
							</p:column>


						</p:row>


						<p:row>
							<p:column>
								<h:outputLabel for="form_password" value="Şifre" />
							</p:column>
							<p:column>
								<p:password id="form_password"
									value="#{personalInfoView.loggedUser.password}" required="true"
									requiredMessage="Lütfen şifre giriniz."
									validatorMessage="Şifreniz eşleşmiyor.Lütfen yeniden deneyiniz."
									match="form_confirm_password" />
							</p:column>

							<p:column>
								<h:outputLabel for="form_confirm_password" value="Şifre Tekrarı" />
							</p:column>
							<p:column>
								<p:password id="form_confirm_password"
									value="#{personalInfoView.confirmPassword}" />
							</p:column>
						</p:row>

						<p:row>
							<p:column>
								<h:outputLabel for="form_email" value="E-Mail" />
							</p:column>
							<p:column>
								<p:inputText id="form_email" validator="emailValidator"
									value="#{personalInfoView.loggedUser.email}" required="true"
									requiredMessage="Lütfen e-mail adresi giriniz.">
									<p:ajax event="blur" update="form_personal_info_messages" />
									<f:attribute name="formName" value="form_personal_info_panel" />
								</p:inputText>
							</p:column>

							<p:column>
								<h:outputLabel for="form_confirm_email" value="E-Mail Tekrarı" />
							</p:column>
							<p:column>
								<p:inputText id="form_confirm_email"
									value="#{personalInfoView.confirmEmail}" />
							</p:column>
						</p:row>



						<p:row>
							<p:column>
								<h:outputLabel for="form_birthday_year" value="Doğum yılı" />
							</p:column>
							<p:column>
								<p:selectOneMenu id="form_birthday_year" required="true"
									requiredMessage="Lütfen doğum yılınızı seçiniz."
									value="#{personalInfoView.loggedUser.birthdayYear}">
									<f:selectItem itemLabel="Doğum yılınızı seçiniz..." />
									<f:selectItems value="#{personalInfoView.birthdayYears}"
										var="birthdayYear" itemValue="#{birthdayYear}" />
								</p:selectOneMenu>
							</p:column>

							<p:column>
								<h:outputLabel for="form_tcno" value="TC kimlik numarası" />
							</p:column>
							<p:column>
								<p:inputMask id="form_tcno"
									value="#{personalInfoView.loggedUser.tcno}" mask="99999999999"
									required="true"
									requiredMessage="Lütfen TC kimlik numaranızı giriniz.">
									<p:ajax event="blur" update="form_personal_info_messages" />
								</p:inputMask>
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:fieldset>

				<p:fieldset legend="Aile Bilgileri">
					<p:panelGrid>

						<p:row>
							<p:column>
								<h:outputLabel for="form_father_name" value="Baba Adı" />
							</p:column>
							<p:column>
								<p:inputText id="form_father_name"
									value="#{personalInfoView.parentInfo.fatherName}"
									required="true" requiredMessage="Lütfen baba adı giriniz.">
								</p:inputText>
							</p:column>

							<p:column>
								<h:outputLabel for="form_mother_name" value="Anne Adı" />
							</p:column>
							<p:column>
								<p:inputText id="form_mother_name"
									value="#{personalInfoView.parentInfo.motherName}"
									required="true" requiredMessage="Lütfen anne adı giriniz.">
								</p:inputText>
							</p:column>


						</p:row>

						<p:row>
							<p:column>
								<h:outputLabel for="form_father_job" value="Baba Mesleği" />
							</p:column>
							<p:column>
								<p:inputText id="form_father_job"
									value="#{personalInfoView.parentInfo.fatherJob}"
									required="true"
									requiredMessage="Lütfen baba mesleğini giriniz.">
								</p:inputText>
							</p:column>

							<p:column>
								<h:outputLabel for="form_mother_job" value="Anne Mesleği" />
							</p:column>
							<p:column>
								<p:inputText id="form_mother_job"
									value="#{personalInfoView.parentInfo.motherJob}"
									required="true"
									requiredMessage="Lütfen anne mesleğini giriniz.">
								</p:inputText>
							</p:column>


						</p:row>

						<p:row>
							<p:column>
								<h:outputLabel for="form_father_birthday_year"
									value="Baba Doğum yılı" />
							</p:column>
							<p:column>
								<p:selectOneMenu id="form_father_birthday_year" required="true"
									requiredMessage="Lütfen doğum yılınızı seçiniz."
									value="#{personalInfoView.parentInfo.fatherBirthdayYear}">
									<f:selectItem itemLabel="Doğum yılınızı seçiniz..." />
									<f:selectItems value="#{personalInfoView.birthdayYears}"
										var="birthdayYear" itemValue="#{birthdayYear}" />
								</p:selectOneMenu>
							</p:column>

							<p:column>
								<h:outputLabel for="form_mother_birthday_year"
									value="Anne Doğum yılı" />
							</p:column>
							<p:column>
								<p:selectOneMenu id="form_mother_birthday_year" required="true"
									requiredMessage="Lütfen doğum yılınızı seçiniz."
									value="#{personalInfoView.parentInfo.motherBirthdayYear}">
									<f:selectItem itemLabel="Doğum yılınızı seçiniz..." />
									<f:selectItems value="#{personalInfoView.birthdayYears}"
										var="birthdayYear" itemValue="#{birthdayYear}" />
								</p:selectOneMenu>
							</p:column>
						</p:row>

						<p:row>
							<p:column>
								<h:outputLabel for="form_parent_monthly_income" value="Ailenin Aylık Gelir Düzeyi" />
							</p:column>
							<p:column>
								<p:inputText id="form_parent_monthly_income"
									value="#{personalInfoView.parentInfo.parentMonthlyIncome}"
									required="true"
									requiredMessage="Lütfen aile gelir düzeyini giriniz.">
								</p:inputText>
							</p:column>

							<p:column>
								<h:outputLabel for="form_parent_phone_number" value="Aile Telefonu" />
							</p:column>
							<p:column>
								<p:inputMask mask="9999-999-99-99" id="form_parent_phone_number"
									value="#{personalInfoView.parentInfo.parentPhoneNumber}"
									required="true"
									requiredMessage="Lütfen aile telefonu giriniz."/>
							</p:column>


						</p:row>
						
						<p:row>
							<p:column>
								<h:outputLabel for="form_parent_address" value="Aile Adresi" />
							</p:column>
							<p:column colspan="3">
								<p:inputTextarea id="form_parent_address"
									value="#{personalInfoView.parentInfo.parentAddress}" rows="5" cols="50"
									maxlength="100" autoResize="false" />
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:fieldset>
				<p:commandButton value="Kaydet"
									action="#{personalInfoView.updatePersonalInfo}" ajax="false"
									update="form_personal_info_messages" />
			</h:form>
		</div>

	</ui:define>
</ui:composition>